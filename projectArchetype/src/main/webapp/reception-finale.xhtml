<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sec="http://www.springframework.org/security/tags">


<h:head>


	<!-- META SECTION -->

	<title>Reception finale</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />


	<link rel="icon" href="favicon.ico" type="image/x-icon" />
	<!-- END META SECTION -->

	<!-- CSS INCLUDE -->
	<link rel="stylesheet" type="text/css" id="theme"
		href="css/theme-default.css" />
	<link href="google-drive/lightbox.css" rel="stylesheet" />
	<link href="google-drive/google-drive.css" rel="stylesheet"
		type="text/css" />
	<!-- EOF CSS INCLUDE -->

	<script
		src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</h:head>
<h:body>

	<ui:composition template="/template.xhtml">

		<ui:define name="body">


			<div class="panel panel-default"
				style="margin-top: 2cm; margin-left: 0.3cm;">
				<div class="container">
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#provisoire"><p:outputPanel
									rendered="#{receptionCtr.projet.descEtat>='412'}">Réception
								Provisoire</p:outputPanel></a></li>
						<li><a data-toggle="tab" href="#demandes"><p:outputPanel
									rendered="#{receptionCtr.projet.descEtat>='513'}">Demandes</p:outputPanel></a></li>
						<li><a data-toggle="tab" href="#definitive"><p:outputPanel
									rendered="#{receptionCtr.projet.descEtat>='519'}">Réception
								Définitive</p:outputPanel></a></li>
						<li><a data-toggle="tab" href="#suivi"><p:outputPanel
									rendered="#{receptionCtr.projet.descEtat>='523'}">Suivi du projet</p:outputPanel></a></li>
					</ul>


					<div class="tab-content" style="padding-bottom: 0.5cm">

						<div id="provisoire" class="tab-pane fade in active">

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='412'}">
								<sec:authorize access="hasRole('PRRST')">
									<table style="margin-left: 0.6cm; margin-top: 0.5cm">
										<td width="400px"><div>
												<h3>
													<li><b>Visite du chantier :</b></li>
												</h3>
											</div></td>
										<td><h:form>
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="Valider" title="Valider"
													action="#{receptionCtr.createVisite()}" ajax="false" />
											</h:form></td>
									</table>
								</sec:authorize>
							</p:outputPanel>
							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='511'}">
								<table style="margin-left: 0.6cm; margin-top: 0.5cm">
									<td width="380px"><div>
											<h3>
												<li><b>Visite du chantier :</b></li>
											</h3>
										</div></td>
									<td><h4>Visite validée</h4></td>
								</table>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='511'}">
								<ul>
									<h3>
										<li><b>Défauts :</b></li>
									</h3>
								</ul>

								<h:form id="form">
									<p:growl id="msgs" showDetail="true" />
									<div align="center">
										<p:dataTable id="singleDT" var="defauts"
											value="#{receptionCtr.defauts}" selectionMode="single"
											style="margin-top: 0.3cm; margin-bottom: 0.5cm; width: 1000px;"
											selection="#{receptionCtr.selectedDefaut}"
											rowKey="#{defauts.idDefaut}">
											<p:column headerText="Id Défaut">
												<h:outputText value="#{defauts.idDefaut}" />
											</p:column>
											<p:column headerText="Id Imm">
												<h:outputText value="#{defauts.immeuble.idImm}" />
											</p:column>
											<p:column headerText="Id App">
												<h:outputText value="#{defauts.appartement.idApp}" />
											</p:column>
											<p:column headerText="Id Bur">
												<h:outputText value="#{defauts.bureau.idBur}" />
											</p:column>
											<p:column headerText="Déscription Défaut"
												style="width: 300px">
												<h:outputText value="#{defauts.descDefaut}" />
											</p:column>
											<p:column headerText="Déscription Travaux"
												style="width: 300px">
												<h:outputText value="#{defauts.travauxDefaut}" />
											</p:column>
											<p:column headerText="Levée du réserve">
												<h:outputText value="#{defauts.leveeReserve}" />
											</p:column>
											<f:facet name="footer">
												<p:outputPanel
													rendered="#{'512'>=receptionCtr.projet.descEtat}">
													<sec:authorize access="hasRole('PRRST')">
														<p:commandButton icon="ui-icon-trash"
															validateClient="true" value="Défauts"
															update=":form:Detail"
															oncomplete="PF('defautsDialog').show();" />
													</sec:authorize>
													<sec:authorize access="hasRole('PRCP')">
														<p:commandButton icon="ui-icon-trash"
															validateClient="true" value="Travaux"
															update=":form:Detail111"
															oncomplete="PF('travauxDialog').show();"
															process="singleDT" />
													</sec:authorize>
													<sec:authorize access="hasRole('PRCP')">
														<p:commandButton icon="ui-icon-trash"
															validateClient="true" value="Reserve"
															update=":form:Detail2"
															oncomplete="PF('reserveDialog').show();"
															process="singleDT" />
													</sec:authorize>
												</p:outputPanel>
											</f:facet>
										</p:dataTable>
									</div>

									<p:dialog header="Travaux" widgetVar="travauxDialog"
										modal="true" showEffect="fade" hideEffect="fade"
										resizable="false">
										<p:outputPanel id="Detail111" style="text-align:center;">
											<p:panelGrid columns="2"
												rendered="#{not empty receptionCtr.selectedDefaut}">
												<h:outputText value="Description travaux :" />
												<p:inputTextarea rows="5" cols="30" queryDelay="750"
													placeholder="Description travaux" minQueryLength="4"
													value="#{receptionCtr.selectedTravaux}" />
											</p:panelGrid>
										</p:outputPanel>
										<div align="center">
											<p:commandButton styleClass="btn btn-info btn-rounded"
												value="ok" title="Valider"
												action="#{receptionCtr.updateDefautTravaux()}" ajax="false" />
										</div>
									</p:dialog>

									<p:dialog header="Réserve" widgetVar="reserveDialog"
										modal="true" showEffect="fade" hideEffect="fade"
										resizable="false">
										<p:outputPanel id="Detail2" style="text-align:center;">
											<p:panelGrid columns="2"
												rendered="#{not empty receptionCtr.selectedDefaut}">
												<h:outputText value="Levée du réserve :" />
												<p:selectOneRadio style="width: 300px"
													value="#{receptionCtr.selectedReserve}">
													<f:selectItem itemLabel="Oui" itemValue="Oui" />
													<f:selectItem itemLabel="Non" itemValue="Non" />
												</p:selectOneRadio>
											</p:panelGrid>
										</p:outputPanel>
										<div align="center">
											<p:commandButton styleClass="btn btn-info btn-rounded"
												value="ok" title="Valider"
												action="#{receptionCtr.updateDefautReserve()}" ajax="false" />
										</div>
									</p:dialog>

									<p:dialog header="Défauts" widgetVar="defautsDialog"
										modal="true" showEffect="fade" hideEffect="fade"
										resizable="false">
										<p:outputPanel id="Detail" style="text-align:center;">
											<p:panelGrid columns="2">
												<h:outputText value="Défaut à :" />
												<p:selectOneRadio style="width: 300px"
													value="#{receptionCtr.immAppBur}">
													<f:selectItem itemLabel="Immeuble" itemValue="Immeuble" />
													<f:selectItem itemLabel="Appartement"
														itemValue="Appartement" />
													<f:selectItem itemLabel="Bureau" itemValue="Bureau" />
												</p:selectOneRadio>
												<h:outputText value="Id Imm/App/Bur :" />
												<p:inputText required="true"
													value="#{receptionCtr.idImmAppBur}"
													placeholder="Id Imm/App/Bur" />
												<h:outputText value="Description défaut :" />
												<p:inputTextarea rows="5" cols="30"
													value="#{receptionCtr.defaut.descDefaut}" queryDelay="750"
													placeholder="Description défaut" minQueryLength="4" />
											</p:panelGrid>
										</p:outputPanel>
										<div align="center">
											<p:commandButton styleClass="btn btn-info btn-rounded"
												value="ok" title="Valider"
												action="#{receptionCtr.createDefaut()}" ajax="false" />
										</div>
									</p:dialog>

								</h:form>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='511'}">
								<sec:authorize access="hasRole('PRRST')">
									<table style="margin-top: 0.5cm;">
										<td width="465px">
											<ul>
												<h3>
													<li><b>Réception provisoire :</b></li>
												</h3>
											</ul>
										</td>
										<td><p:commandButton
												styleClass="btn btn-info btn-rounded" value="ok"
												title="Valider"
												action="#{receptionCtr.createReceptionProvisoire()}"
												ajax="false" /></td>
									</table>
								</sec:authorize>
							</p:outputPanel>
							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='512'}">
								<table style="margin-top: 0.5cm;">
									<td width="400px">
										<ul>
											<h3>
												<li><b>Réception provisoire :</b></li>
											</h3>
										</ul>
									</td>
									<td><h4>Réception provisoire validée</h4></td>
								</table>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='512'}">
								<sec:authorize access="hasRole('PRRST')">
									<table style="margin-bottom: 0.4cm;">
										<td width="465px">
											<ul>
												<h3>
													<li><b>Réception finale :</b></li>
												</h3>
											</ul>
										</td>
										<td><p:commandButton
												styleClass="btn btn-info btn-rounded" value="ok"
												title="Valider"
												action="#{receptionCtr.createReceptionFinale()}"
												ajax="false" /></td>
									</table>
								</sec:authorize>
							</p:outputPanel>
							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='513'}">
								<table>
									<td width="400px">
										<ul>
											<h3>
												<li><b>Réception finale :</b></li>
											</h3>
										</ul>
									</td>
									<td><h4>Réception finale validée</h4></td>
								</table>
							</p:outputPanel>
						</div>



						<div id="demandes" class="tab-pane fade in active">
							<div style="margin-top: 0.5cm">
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='513'}">
									<sec:authorize access="hasRole('PRCP')">
										<table>
											<td width="465px">
												<ul>
													<h3>
														<li><b>Plan de récollement :</b></li>
													</h3>
												</ul>
											</td>
											<td><h:form>
													<p:commandButton styleClass="btn btn-info btn-rounded"
														value="Ajouter" title="Valider"
														action="#{receptionCtr.createPlanRecollement()}"
														ajax="false" />
												</h:form></td>
										</table>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='514'}">
									<table>
										<td width="400px">
											<ul>
												<h3>
													<li><b>Plan de récollement :</b></li>
												</h3>
											</ul>
										</td>
										<td><h4>Plan de récollement ajouté au systeme GED</h4></td>
									</table>
								</p:outputPanel>

								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='514'}">
									<sec:authorize access="hasRole('PRAR')">
										<h:form>
											<table style="margin-left: 3cm; margin-top: 0.3cm">
												<td width="300px">
													<h4>
														<b>-> Correspondance des travaux aux plans :</b>
													</h4>
												</td>
												<td><p:commandButton
														styleClass="btn btn-info btn-rounded" value="Valider"
														title="Valider" style="margin-left: 50px"
														action="#{receptionCtr.validerCorrespondanceTravauxPlans()}"
														ajax="false" /></td>
											</table>
										</h:form>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='515'}">
									<table>
										<td width="300px">
											<ul>
												<h3>
													<li><b>Correspondance des travaux aux plans :</b></li>
												</h3>
											</ul>
										</td>
										<td><h4 style="margin-left: 100px">Travaux validés
												selon le plan de récollement</h4></td>
									</table>
								</p:outputPanel>
							</div>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='515'}">
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='515'}">
									<sec:authorize access="hasRole('PRCP')">
										<ul>
											<h3>
												<li><b>Dossier d'occupation :</b></li>
											</h3>
										</ul>
										<h:form>
											<table style="margin-left: 3cm; margin-top: 0.3cm">
												<td width="380px">
													<h4>
														<b>-> Demande d'occupation :</b>
													</h4>
												</td>
												<td><p:commandButton
														styleClass="btn btn-info btn-rounded" value="Ajouter"
														title="Valider"
														action="#{receptionCtr.createDemandeOccupation()}"
														ajax="false" /></td>
											</table>
										</h:form>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='516'}">
									<ul>
										<h3>
											<li><b>Dossier d'occupation :</b></li>
										</h3>
									</ul>
									<table style="margin-left: 3cm; margin-top: 0.3cm">
										<td width="290px">
											<h4>
												<b>-> Demande d'occupation :</b>
											</h4>
										</td>
										<td><h4>Demande d'occupation ajoutée au systeme GED</h4></td>
									</table>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='516'}">
									<sec:authorize access="hasRole('PRCP')">
										<h:form>
											<table style="margin-left: 3cm;">
												<td width="380px">
													<h4>
														<b>-> Permis d'occupation :</b>
													</h4>
												</td>
												<td><p:commandButton
														styleClass="btn btn-info btn-rounded" value="Ajouter"
														title="Valider"
														action="#{receptionCtr.createPermisOccupation()}"
														ajax="false" /></td>
											</table>
										</h:form>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='517'}">
									<table style="margin-left: 3cm; margin-top: 0.3cm">
										<td width="290px">
											<h4>
												<b>-> Permis d'occupation :</b>
											</h4>
										</td>
										<td><h4>Permis d'occupation ajoutée au systeme GED</h4></td>
									</table>
								</p:outputPanel>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='517'}">
								<ul>
									<h3>
										<li><b>Dossier d'immatriculation :</b></li>
									</h3>
								</ul>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='517'}">
									<sec:authorize access="hasRole('PRCP')">
										<h:form>
											<table
												style="margin-left: 3cm; margin-top: 0.3cm; margin-bottom: 0.3cm">
												<td width="380px">
													<h4>
														<b>-> Demande d'immatriculation :</b>
													</h4>
												</td>
												<td><p:commandButton
														styleClass="btn btn-info btn-rounded" value="Ajouter"
														title="Valider"
														action="#{receptionCtr.createDemandeImmatriculation()}"
														ajax="false" /></td>
											</table>
										</h:form>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='518'}">
									<table style="margin-left: 3cm; margin-top: 0.3cm">
										<td width="290px">
											<h4>
												<b>-> Demande d'immatriculation :</b>
											</h4>
										</td>
										<td><h4>Demande d'immatriculation ajoutée au systeme
												GED</h4></td>
									</table>
								</p:outputPanel>

								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='518'}">
									<sec:authorize access="hasRole('PRCP')">
										<h:form>
											<table
												style="margin-left: 3cm; margin-top: 0.3cm; margin-bottom: 0.3cm">
												<td width="380px">
													<h4>
														<b>-> Permis d'immatriculation :</b>
													</h4>
												</td>
												<td><p:commandButton
														styleClass="btn btn-info btn-rounded" value="Ajouter"
														title="Valider"
														action="#{receptionCtr.createPermisImmatriculation()}"
														ajax="false" /></td>
											</table>
										</h:form>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='519'}">
									<table style="margin-left: 3cm; margin-top: 0.3cm">
										<td width="290px">
											<h4>
												<b>-> Permis d'immatriculation :</b>
											</h4>
										</td>
										<td><h4>Permis d'immatriculation ajoutée au systeme
												GED</h4></td>
									</table>
								</p:outputPanel>

							</p:outputPanel>
						</div>




						<div id="definitive" class="tab-pane fade in active">
							<div style="margin-top: 0.5cm">

								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='519'}">
									<ul>
										<h3>
											<li><b>Défauts :</b></li>
										</h3>
									</ul>

									<h:form id="form1">
										<p:growl id="msgs" showDetail="true" />
										<div align="center">
											<p:dataTable id="singleDT" var="defauts"
												value="#{receptionCtr.defauts}" selectionMode="single"
												style="margin-top: 0.3cm; margin-bottom: 0.5cm; width: 1000px;"
												selection="#{receptionCtr.selectedDefaut}"
												rowKey="#{defauts.idDefaut}">
												<p:column headerText="Id Défaut">
													<h:outputText value="#{defauts.idDefaut}" />
												</p:column>
												<p:column headerText="Id Imm">
													<h:outputText value="#{defauts.immeuble.idImm}" />
												</p:column>
												<p:column headerText="Id App">
													<h:outputText value="#{defauts.appartement.idApp}" />
												</p:column>
												<p:column headerText="Id Bur">
													<h:outputText value="#{defauts.bureau.idBur}" />
												</p:column>
												<p:column headerText="Déscription Défaut"
													style="width: 300px">
													<h:outputText value="#{defauts.descDefaut}" />
												</p:column>
												<p:column headerText="Déscription Travaux"
													style="width: 300px">
													<h:outputText value="#{defauts.travauxDefaut}" />
												</p:column>
												<p:column headerText="Validation Défaut">
													<h:outputText value="#{defauts.validationDefaut}" />
												</p:column>
												<p:column headerText="Levée du réserve">
													<h:outputText value="#{defauts.leveeReserve}" />
												</p:column>
												<f:facet name="footer">
													<p:outputPanel>
														<p:outputPanel
															rendered="#{'520'>=receptionCtr.projet.descEtat}">
															<sec:authorize access="hasRole('PRCP')">
																<p:commandButton icon="ui-icon-trash"
																	validateClient="true" value="Défauts"
																	update=":form1:Detail"
																	oncomplete="PF('defautsDialog').show();" />
															</sec:authorize>
															<sec:authorize access="hasRole('PRRST')">
																<p:commandButton icon="ui-icon-trash"
																	validateClient="true" value="Validation Défaut"
																	update=":form1:Detail222"
																	oncomplete="PF('validationDefautDialog').show();"
																	process="singleDT" />
															</sec:authorize>
														</p:outputPanel>
														<p:outputPanel
															rendered="#{receptionCtr.projet.descEtat=='521'}">
															<sec:authorize access="hasRole('PRCP')">
																<p:commandButton icon="ui-icon-trash"
																	validateClient="true" value="Travaux"
																	update=":form1:Detail111"
																	oncomplete="PF('travauxDialog').show();"
																	process="singleDT" />
															</sec:authorize>
															<sec:authorize access="hasRole('PRRST')">
																<p:commandButton icon="ui-icon-trash"
																	validateClient="true" value="Levée Reserve"
																	update=":form1:Detail5"
																	oncomplete="PF('reserveDialog').show();"
																	process="singleDT" />
															</sec:authorize>
														</p:outputPanel>
													</p:outputPanel>
												</f:facet>
											</p:dataTable>
										</div>

										<p:dialog header="Travaux" widgetVar="travauxDialog"
											modal="true" showEffect="fade" hideEffect="fade"
											resizable="false">
											<p:outputPanel id="Detail111" style="text-align:center;">
												<p:panelGrid columns="2"
													rendered="#{not empty receptionCtr.selectedDefaut}">
													<h:outputText value="Description travaux :" />
													<p:inputTextarea rows="5" cols="30" queryDelay="750"
														placeholder="Description travaux" minQueryLength="4"
														value="#{receptionCtr.selectedTravaux}" />
												</p:panelGrid>
											</p:outputPanel>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.updateDefautClient()}" ajax="false" />
											</div>
										</p:dialog>

										<p:dialog header="Validation Défaut"
											widgetVar="validationDefautDialog" modal="true"
											showEffect="fade" hideEffect="fade" resizable="false">
											<p:outputPanel id="Detail222" style="text-align:center;">
												<p:panelGrid
													rendered="#{not empty receptionCtr.selectedDefaut}">
													<p:panelGrid columns="2"
														rendered="#{receptionCtr.selectedDefaut.validationDefaut == null}">
														<h:outputText value="Valider ce défaut :" />
														<p:commandButton styleClass="btn btn-info btn-rounded"
															value="ok" title="Valider"
															action="#{receptionCtr.updateDefautClientValidation()}"
															ajax="false" />
													</p:panelGrid>
												</p:panelGrid>
												<div align="center">
													<p:commandButton styleClass="btn btn-info btn-rounded"
														value="Envoyer les réserves" title="ok"
														action="#{receptionCtr.validerDefauts()}" ajax="false" />
												</div>
											</p:outputPanel>
										</p:dialog>

										<p:dialog header="Réserve" widgetVar="reserveDialog"
											modal="true" showEffect="fade" hideEffect="fade"
											resizable="false">
											<p:outputPanel id="Detail5" style="text-align:center;">
												<p:panelGrid columns="2"
													rendered="#{not empty receptionCtr.selectedDefaut}">
													<h:outputText value="Levée du réserve :" />
													<p:selectOneRadio value="#{receptionCtr.selectedReserve}">
														<f:selectItem itemLabel="Oui" itemValue="Oui" />
														<f:selectItem itemLabel="Non" itemValue="Non" />
													</p:selectOneRadio>
												</p:panelGrid>
											</p:outputPanel>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.updateDefautLeveeReserve()}"
													ajax="false" />
											</div>
										</p:dialog>

										<p:dialog header="Défauts" widgetVar="defautsDialog"
											modal="true" showEffect="fade" hideEffect="fade"
											resizable="false">
											<p:outputPanel id="Detail" style="text-align:center;">
												<p:panelGrid columns="2">
													<h:outputText value="Défaut à :" />
													<p:selectOneRadio style="width: 300px"
														value="#{receptionCtr.immAppBur}">
														<f:selectItem itemLabel="Immeuble" itemValue="Immeuble" />
														<f:selectItem itemLabel="Appartement"
															itemValue="Appartement" />
														<f:selectItem itemLabel="Bureau" itemValue="Bureau" />
													</p:selectOneRadio>
													<h:outputText value="Id Imm/App/Bur :" />
													<p:inputText required="true"
														value="#{receptionCtr.idImmAppBur}"
														placeholder="Id Imm/App/Bur" />
													<h:outputText value="Description défaut :" />
													<p:inputTextarea rows="5" cols="30"
														value="#{receptionCtr.defaut.descDefaut}" queryDelay="750"
														placeholder="Description défaut" minQueryLength="4" />
												</p:panelGrid>
											</p:outputPanel>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.createDefautClient()}" ajax="false" />
											</div>
										</p:dialog>

									</h:form>
								</p:outputPanel>

								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='521'}">
									<sec:authorize access="hasRole('PRRST')">
										<table>
											<td width="465px">
												<ul>
													<h3>
														<li><b>Levée des réserves :</b></li>
													</h3>
												</ul>
											</td>
											<td><h:form>
													<p:commandButton styleClass="btn btn-info btn-rounded"
														value="Valider" title="Valider"
														action="#{receptionCtr.validerLeveeReserves()}"
														ajax="false" />
												</h:form></td>
										</table>
									</sec:authorize>
								</p:outputPanel>

								<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='522'}">
									<sec:authorize access="hasRole('PRRST')">
										<table style="margin-bottom: 0.4cm;">
											<td width="465px">
												<ul>
													<h3>
														<li><b>Réception définitive :</b></li>
													</h3>
												</ul>
											</td>
											<td><h:form>
													<p:commandButton styleClass="btn btn-info btn-rounded"
														value="ok" title="Valider"
														action="#{receptionCtr.createReceptionDefinitive()}"
														ajax="false" />
												</h:form></td>
										</table>
									</sec:authorize>
								</p:outputPanel>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='523'}">
									<table style="margin-bottom: 0.4cm;">
										<td width="380px">
											<ul>
												<h3>
													<li><b>Réception définitive :</b></li>
												</h3>
											</ul>
										</td>
										<td><h4>Réception définitive validée</h4></td>
									</table>
								</p:outputPanel>
							</div>
						</div>



						<div id="suivi" class="tab-pane fade in active">
							<div style="margin-top: 0.5cm">
								<ul>
									<h3>
										<li><b>Syndicat :</b></li>
									</h3>
								</ul>
								<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='523'}">

									<h:form id="form2">
										<p:growl id="msgs" showDetail="true" />
										<div align="center">
											<p:dataTable var="clients" value="#{receptionCtr.clients}">
												<p:column headerText="Id Client">
													<h:outputText value="#{clients.idCli}" />
												</p:column>
												<p:column headerText="Nom Client">
													<h:outputText value="#{clients.nom}" />
												</p:column>
												<p:column headerText="Prénom Client">
													<h:outputText value="#{clients.prenom}" />
												</p:column>
												<p:column headerText="Fonction">
													<h:outputText value="#{clients.fonctionSyndicat}" />
												</p:column>
												<f:facet name="footer">
													<p:outputPanel
														rendered="#{receptionCtr.projet.descEtat=='523'}">
														<sec:authorize access="hasRole('PRCP')">
															<p:commandButton icon="ui-icon-trash"
																validateClient="true" value="Ajouter"
																update=":form2:syndicat"
																oncomplete="PF('syndicatDialog').show();" />
														</sec:authorize>
													</p:outputPanel>
												</f:facet>
											</p:dataTable>
										</div>
										
										<p:dialog header="Syndicat" widgetVar="syndicatDialog"
											modal="true" showEffect="fade" hideEffect="fade"
											resizable="false">
											<p:outputPanel id="syndicat" style="text-align:center;">
												<p:panelGrid columns="2">
													<h:outputText value="Id Client :" />
													<p:inputText required="true"
														placeholder="Id Client"
														value="#{receptionCtr.client.idCli}" />
													<h:outputText value="Fonction :" />
													<p:inputText required="true" placeholder="Fonction"
														value="#{receptionCtr.client.fonctionSyndicat}" />
												</p:panelGrid>
											</p:outputPanel>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.createSyndicat()}" ajax="false" />
											</div>
										</p:dialog>
									</h:form>
								</p:outputPanel>
							</div>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat>='523'}">
								<p:outputPanel rendered="#{'524'>=receptionCtr.projet.descEtat}">
									<sec:authorize access="hasRole('PRCP')">
										<ul>
											<h3>
												<li><b>Défauts :</b></li>
											</h3>
										</ul>
										<h:form>
											<div align="center">
												<h:panelGrid columns="2" style="margin-bottom:5px"
													cellpadding="5">
													<p:selectOneRadio style="width: 300px"
														value="#{receptionCtr.immAppBur}">
														<f:selectItem itemLabel="Immeuble" itemValue="Immeuble" />
														<f:selectItem itemLabel="Appartement"
															itemValue="Appartement" />
														<f:selectItem itemLabel="Bureau" itemValue="Bureau" />
													</p:selectOneRadio>
												</h:panelGrid>
											</div>
											<div align="center" style="margin-bottom: 0.2cm">
												<p:inputText required="true"
													value="#{receptionCtr.idImmAppBur}"
													placeholder="Id Imm/App/Bur" />
											</div>
											<div align="center">
												<p:inputTextarea rows="5" cols="30"
													value="#{receptionCtr.defaut.descDefaut}" queryDelay="750"
													placeholder="Description défaut" minQueryLength="4" />
											</div>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.createDefautClientFinale()}" />
											</div>
										</h:form>
									</sec:authorize>
								</p:outputPanel>

								<ul>
									<h3>
										<li><b>Défauts :</b></li>
									</h3>
								</ul>
								<div align="center" style="margin-bottom: 0.6cm">
									<p:dataTable var="defauts" value="#{receptionCtr.defauts}"
										style="margin-top: 0.5cm; width: 800px;">
										<p:column headerText="Id Défaut" style="width: 200px">
											<h:outputText value="#{defauts.idDefaut}" />
										</p:column>
										<p:column headerText="Id Imm" style="width: 200px">
											<h:outputText value="#{defauts.immeuble.idImm}" />
										</p:column>
										<p:column headerText="Id App" style="width: 200px">
											<h:outputText value="#{defauts.appartement.idApp}" />
										</p:column>
										<p:column headerText="Id Bur" style="width: 200px">
											<h:outputText value="#{defauts.bureau.idBur}" />
										</p:column>
										<p:column headerText="Déscription Défaut">
											<h:outputText value="#{defauts.descDefaut}" />
										</p:column>
										<p:column headerText="Déscription Travaux">
											<h:outputText value="#{defauts.travauxDefaut}" />
										</p:column>
									</p:dataTable>
								</div>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='524'}">
								<sec:authorize access="hasRole('PRRST')">
									<table>
										<td width="465px">
											<ul>
												<h3>
													<li><b>Réserves :</b></li>
												</h3>
											</ul>
										</td>
										<td><h:form>
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="Valider" title="Valider"
													action="#{receptionCtr.validerReservesFinale()}" />
											</h:form></td>
									</table>
								</sec:authorize>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='525'}">
								<div style="margin-left: 3cm;">
									<h4>
										<b>-> Travaux :</b>
									</h4>
									<sec:authorize access="hasRole('PRCP')">
										<h:form>
											<div align="center" style="margin-bottom: 0.2cm">
												<p:inputText required="true"
													value="#{receptionCtr.defaut.idDefaut}"
													placeholder="ID Défaut" />
											</div>
											<div align="center">
												<p:inputTextarea rows="5" cols="30" queryDelay="750"
													placeholder="Description travaux" minQueryLength="4"
													value="#{receptionCtr.defaut.travauxDefaut}" />
											</div>
											<div align="center">
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="ok" title="Valider"
													action="#{receptionCtr.updateDefautClientFinale()}" />
											</div>
										</h:form>
									</sec:authorize>
								</div>
							</p:outputPanel>

							<p:outputPanel rendered="#{receptionCtr.projet.descEtat=='525'}">
								<sec:authorize access="hasRole('PRRST')">
									<table>
										<td width="465px">
											<ul>
												<h3>
													<li><b>Levée des réserves :</b></li>
												</h3>
											</ul>
										</td>
										<td><h:form>
												<p:commandButton styleClass="btn btn-info btn-rounded"
													value="Valider" title="Valider"
													action="#{receptionCtr.validerLeveeReservesFinale()}" />
											</h:form></td>
									</table>
								</sec:authorize>
							</p:outputPanel>

						</div>
					</div>
				</div>
			</div>


		</ui:define>
	</ui:composition>

</h:body>
</html>
